<!DOCTYPE html>
<html>
<head>
	<title>Radunfälle Gütersloh 2015</title>
	<meta charset="utf-8" />

	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link type="text/css" rel="stylesheet" href="leaflet.css">
	<link type="text/css" rel="stylesheet" href="MarkerCluster.css">
	<link type="text/css" rel="stylesheet" href="MarkerCluster.Default.css">

	<script src="leaflet.js"></script>
	<script src="leaflet.markercluster.js"></script>
	<script src="leaflet.ajax.min.js"></script>
	<script src="data.js"></script>
	<style>
		body { padding: 0; margin 0; }
		html, body, #mapid { height: 100%;, width: 100%; }
	</style>
</head>
<body>
	<div id="mapid"</div>
	<script>
		var map=L.map('mapid').setView([51.902578, 8.385411], 12);

		L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
			maxZoom: 18,
			attribution: 'Map data © <a href="http://openstreetmap.org">OpenStreetMap</a> contributors',
			id: 'basemap'
		}).addTo(map);

		var boundary = L.geoJson.ajax("boundary_guetersloh.geojson",
				{
					style: {
							"color": "#ff0080",
							"fillOpacity": 0
					}
				});
		map.addLayer(boundary);

		var markers = L.markerClusterGroup();

		for(var i in data) {
			var d=data[i];

			/* Create unfalltype */
			var typ=d.typ;
			var utyp=d.utyp;

			if (utyp < 10) {
					utyp="0" + utyp;
			}
			var type=typ + utyp;


			var t="Title " + type;

			var m=L.marker(new L.LatLng(data[i].geoy, data[i].geox),
					{ title: t });

			/* Create unfalltype image link */
			var timage="<img src=\"images/unka/" + type + ".png\">";

			/* Create popup with HTML code */
			var p=d.tag + " " + d.datum + " " + d.zeit + "<br>" + timage;

			m.bindPopup(p)

			markers.addLayer(m);
		}
	
		map.addLayer(markers);
	</script>
</body>
</html>
